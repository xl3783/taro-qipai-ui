# æ¸¸æˆè®°è´¦å°ç¨‹åº

ä¸€ä¸ªä¸“ä¸ºæ£‹ç‰Œæ¸¸æˆè®¾è®¡çš„è®°è´¦å°ç¨‹åºï¼Œæ”¯æŒå¤šäººæˆ¿é—´ã€å®æ—¶è½¬è´¦è®°åˆ†ã€äº¤æ˜“å†å²è¿½è¸ªå’Œæ™ºèƒ½ç»“ç®—ç­‰åŠŸèƒ½ã€‚

## ğŸš€ é¡¹ç›®ç‰¹æ€§

- **å¤šäººæˆ¿é—´ç®¡ç†**: åˆ›å»º/åŠ å…¥æ¸¸æˆæˆ¿é—´ï¼Œå®æ—¶åŒæ­¥
- **æ™ºèƒ½è®°åˆ†ç³»ç»Ÿ**: æ”¯æŒè½¬è´¦ã€æ¶ˆè´¹ç­‰å¤šç§äº¤æ˜“ç±»å‹  
- **å®æ—¶äº¤æ˜“å†å²**: å®Œæ•´çš„æµæ°´è®°å½•å’Œç»Ÿè®¡åˆ†æ
- **æ™ºèƒ½ç»“ç®—ç®—æ³•**: è‡ªåŠ¨è®¡ç®—æœ€ä¼˜ç»“ç®—æ–¹æ¡ˆ
- **ç”¨æˆ·ç»Ÿè®¡ç³»ç»Ÿ**: èƒœç‡ã€ç§¯åˆ†ã€æ’è¡Œæ¦œç­‰æ•°æ®ç»Ÿè®¡
- **GraphQL API**: ç°ä»£åŒ–çš„æ•°æ®æŸ¥è¯¢å’Œå˜æ›´æ¥å£

## ğŸ›  æŠ€æœ¯æ ˆ

- **å‰ç«¯æ¡†æ¶**: Taro 3.6 + React 18
- **æ•°æ®ç®¡ç†**: GraphQL + Mockæ•°æ®æœåŠ¡  
- **UIç»„ä»¶**: è‡ªå®šä¹‰ç»„ä»¶åº“
- **æ ·å¼æ–¹æ¡ˆ**: Sass + Tailwind CSS
- **æ„å»ºå·¥å…·**: Webpack 5
- **æµ‹è¯•æ¡†æ¶**: Jest

## ğŸ“± æ”¯æŒå¹³å°

- å¾®ä¿¡å°ç¨‹åº
- æ”¯ä»˜å®å°ç¨‹åº
- å­—èŠ‚è·³åŠ¨å°ç¨‹åº
- QQå°ç¨‹åº
- äº¬ä¸œå°ç¨‹åº
- H5ç½‘é¡µç‰ˆ

## ğŸ— é¡¹ç›®ç»“æ„

```
game-accounting/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/           # é€šç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ game-settlement.js
â”‚   â”‚   â”œâ”€â”€ transaction-history.js
â”‚   â”‚   â”œâ”€â”€ transfer-modal.js
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ pages/               # é¡µé¢ç»„ä»¶
â”‚   â”‚   â””â”€â”€ index/
â”‚   â”œâ”€â”€ graphql/             # GraphQLç›¸å…³
â”‚   â”‚   â”œâ”€â”€ schema.js        # GraphQL Schemaå®šä¹‰
â”‚   â”‚   â”œâ”€â”€ resolvers.js     # è§£æå™¨å®ç°
â”‚   â”‚   â”œâ”€â”€ client.js        # GraphQLå®¢æˆ·ç«¯
â”‚   â”‚   â””â”€â”€ mock-data.js     # Mockæ•°æ®
â”‚   â”œâ”€â”€ hooks/               # è‡ªå®šä¹‰Hooks
â”‚   â”‚   â””â”€â”€ useGraphQL.js    # GraphQLæ•°æ®è·å–hooks
â”‚   â”œâ”€â”€ services/            # ä¸šåŠ¡é€»è¾‘æœåŠ¡
â”‚   â”‚   â””â”€â”€ gameService.js   # æ¸¸æˆä¸šåŠ¡æœåŠ¡
â”‚   â””â”€â”€ assets/              # é™æ€èµ„æº
â”œâ”€â”€ docs/                    # é¡¹ç›®æ–‡æ¡£
â”‚   â”œâ”€â”€ database-design.md   # æ•°æ®åº“è®¾è®¡
â”‚   â””â”€â”€ graphql-usage.md     # GraphQLä½¿ç”¨æŒ‡å—
â”œâ”€â”€ config/                  # é…ç½®æ–‡ä»¶
â”œâ”€â”€ __tests__/              # æµ‹è¯•æ–‡ä»¶
â””â”€â”€ package.json
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒå‡†å¤‡
```bash
# å®‰è£…ä¾èµ–
npm install
# æˆ–
yarn install
```

### å¼€å‘è°ƒè¯•
```bash
# å¾®ä¿¡å°ç¨‹åº
npm run dev:weapp

# H5ç½‘é¡µç‰ˆ
npm run dev:h5

# æ”¯ä»˜å®å°ç¨‹åº
npm run dev:alipay

# å­—èŠ‚è·³åŠ¨å°ç¨‹åº  
npm run dev:tt
```

### ç”Ÿäº§æ„å»º
```bash
# æ„å»ºå¾®ä¿¡å°ç¨‹åº
npm run build:weapp

# æ„å»ºH5ç‰ˆæœ¬
npm run build:h5
```

## ğŸ“Š GraphQLé›†æˆ

### æ•°æ®æ¨¡å‹
é¡¹ç›®é‡‡ç”¨GraphQLä½œä¸ºæ•°æ®æŸ¥è¯¢è¯­è¨€ï¼Œä¸»è¦åŒ…å«ä»¥ä¸‹æ•°æ®ç±»å‹ï¼š

- **User**: ç”¨æˆ·ä¿¡æ¯å’Œä½™é¢
- **Room**: æ¸¸æˆæˆ¿é—´å’ŒçŠ¶æ€
- **Transaction**: äº¤æ˜“è®°å½•
- **GameStats**: æ¸¸æˆç»Ÿè®¡æ•°æ®
- **SettlementResult**: ç»“ç®—ç»“æœ

### ä½¿ç”¨ç¤ºä¾‹

#### æŸ¥è¯¢å½“å‰ç”¨æˆ·
```javascript
import { useCurrentUser } from '@/hooks/useGraphQL';

const { data, loading, error } = useCurrentUser();
```

#### åˆ›å»ºäº¤æ˜“
```javascript
import { useCreateTransaction } from '@/hooks/useGraphQL';

const [createTransaction] = useCreateTransaction();

await createTransaction({
  input: {
    fromPlayerId: 'user1',
    toPlayerId: 'user2', 
    amount: 100,
    description: 'æ¸¸æˆèµ”ä»˜',
    type: 'TRANSFER',
    roomId: 'room1'
  }
});
```

#### æˆ¿é—´ç»“ç®—
```javascript
import { GameService } from '@/services/gameService';

// ç”Ÿæˆç»“ç®—ç­–ç•¥
const strategy = await GameService.calculateSettlementStrategy(roomId);

// æ‰§è¡Œç»“ç®—
const results = await GameService.settleRoom(roomId);
```

### Mockæ•°æ®æœåŠ¡
å¼€å‘é˜¶æ®µä½¿ç”¨å†…ç½®çš„Mockæ•°æ®æœåŠ¡ï¼Œæ¨¡æ‹ŸçœŸå®çš„GraphQL APIï¼š

```javascript
import { graphqlClient, QUERIES, MUTATIONS } from '@/graphql/client';

// æŸ¥è¯¢æ•°æ®
const result = await graphqlClient.query(QUERIES.GET_USERS);

// å˜æ›´æ•°æ®  
const result = await graphqlClient.mutate(MUTATIONS.CREATE_USER, {
  input: { name: 'æ–°ç”¨æˆ·' }
});
```

## ğŸ® ä¸»è¦åŠŸèƒ½

### æˆ¿é—´ç®¡ç†
- åˆ›å»ºæ¸¸æˆæˆ¿é—´ï¼Œè®¾ç½®æˆ¿é—´åç§°å’Œè§„åˆ™
- ç”Ÿæˆæˆ¿é—´ç ï¼Œé‚€è¯·å¥½å‹åŠ å…¥
- å®æ—¶æ˜¾ç¤ºæˆ¿é—´æˆå‘˜å’Œä½™é¢çŠ¶æ€

### äº¤æ˜“è®°åˆ†
- æ”¯æŒç©å®¶é—´è½¬è´¦è®°åˆ†
- è®°å½•å„ç§æ¶ˆè´¹ï¼ˆèŒ¶æ°´è´¹ã€é¤è´¹ç­‰ï¼‰
- äº¤æ˜“å†å²å®Œæ•´è¿½è¸ª

### æ™ºèƒ½ç»“ç®—  
- è‡ªåŠ¨è®¡ç®—æœ€ä¼˜ç»“ç®—æ–¹æ¡ˆ
- æœ€å°åŒ–è½¬è´¦æ¬¡æ•°çš„ç®—æ³•
- ä¸€é”®æ‰§è¡Œç»“ç®—æ“ä½œ

### æ•°æ®ç»Ÿè®¡
- ä¸ªäººèƒœç‡å’Œç§¯åˆ†ç»Ÿè®¡
- æœ‹å‹åœˆæ’è¡Œæ¦œ
- å†å²æˆ¿é—´æ•°æ®æŸ¥è¯¢

## ğŸ—„ æ•°æ®åº“è®¾è®¡

é¡¹ç›®é‡‡ç”¨å…³ç³»å‹æ•°æ®åº“è®¾è®¡ï¼Œä¸»è¦åŒ…å«ä»¥ä¸‹è¡¨ï¼š

- `users` - ç”¨æˆ·ä¿¡æ¯è¡¨
- `rooms` - æˆ¿é—´ä¿¡æ¯è¡¨  
- `room_members` - æˆ¿é—´æˆå‘˜å…³ç³»è¡¨
- `transactions` - äº¤æ˜“è®°å½•è¡¨
- `game_stats` - æ¸¸æˆç»Ÿè®¡è¡¨
- `settlement_results` - ç»“ç®—ç»“æœè¡¨

è¯¦ç»†è®¾è®¡è¯·å‚è€ƒï¼š[æ•°æ®åº“è®¾è®¡æ–‡æ¡£](./docs/database-design.md)

## ğŸ“– APIæ–‡æ¡£

GraphQL APIçš„è¯¦ç»†ä½¿ç”¨æ–¹æ³•è¯·å‚è€ƒï¼š[GraphQLä½¿ç”¨æŒ‡å—](./docs/graphql-usage.md)

## ğŸ§ª æµ‹è¯•

```bash
# è¿è¡Œå•å…ƒæµ‹è¯•
npm test

# è¿è¡Œæµ‹è¯•å¹¶ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
npm test -- --coverage
```

## ğŸ“ å¼€å‘è§„èŒƒ

### ä»£ç è§„èŒƒ
- éµå¾ªESLinté…ç½®è§„åˆ™
- ä½¿ç”¨Prettieræ ¼å¼åŒ–ä»£ç 
- ç»„ä»¶å‘½åé‡‡ç”¨PascalCase
- æ–‡ä»¶å‘½åé‡‡ç”¨kebab-case

### Gitæäº¤è§„èŒƒ
```bash
feat: æ–°åŠŸèƒ½
fix: ä¿®å¤é—®é¢˜  
docs: æ–‡æ¡£æ›´æ–°
style: ä»£ç æ ¼å¼è°ƒæ•´
refactor: ä»£ç é‡æ„
test: æµ‹è¯•ç›¸å…³
chore: æ„å»ºé…ç½®ç­‰
```

### ç»„ä»¶å¼€å‘
- ä¼˜å…ˆä½¿ç”¨å‡½æ•°ç»„ä»¶å’ŒHooks
- åˆç†æ‹†åˆ†ç»„ä»¶ç²’åº¦
- æä¾›å®Œæ•´çš„PropTypesæˆ–TypeScriptç±»å‹
- ç¼–å†™ç»„ä»¶ä½¿ç”¨ç¤ºä¾‹

## ğŸš€ éƒ¨ç½²æŒ‡å—

### å°ç¨‹åºå‘å¸ƒ
1. ä½¿ç”¨å¯¹åº”å¹³å°çš„å¼€å‘è€…å·¥å…·æ‰“å¼€`dist`ç›®å½•
2. é…ç½®appidå’Œé¡¹ç›®ä¿¡æ¯
3. ä¸Šä¼ ä»£ç å¹¶æäº¤å®¡æ ¸

### H5éƒ¨ç½²
1. è¿è¡Œ`npm run build:h5`ç”Ÿæˆé™æ€æ–‡ä»¶
2. å°†`dist/h5`ç›®å½•ä¸Šä¼ åˆ°æœåŠ¡å™¨
3. é…ç½®nginxæˆ–å…¶ä»–webæœåŠ¡å™¨

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Forkæœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. åˆ›å»ºPull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨MITè®¸å¯è¯ - æŸ¥çœ‹[LICENSE](LICENSE)æ–‡ä»¶äº†è§£è¯¦æƒ…

## ğŸ“ è”ç³»æ–¹å¼

- é¡¹ç›®åœ°å€ï¼š[GitHubä»“åº“é“¾æ¥]
- é—®é¢˜åé¦ˆï¼š[Issuesé¡µé¢]
- æŠ€æœ¯äº¤æµï¼š[æŠ€æœ¯äº¤æµç¾¤]

## ğŸ™ è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰ä¸ºæœ¬é¡¹ç›®åšå‡ºè´¡çŒ®çš„å¼€å‘è€…ï¼

---

**æ³¨æ„**: æœ¬é¡¹ç›®ç›®å‰å¤„äºå¼€å‘é˜¶æ®µï¼Œä½¿ç”¨Mockæ•°æ®æœåŠ¡ã€‚ç”Ÿäº§ç¯å¢ƒéœ€è¦æ›¿æ¢ä¸ºçœŸå®çš„GraphQLåç«¯æœåŠ¡ã€‚ 